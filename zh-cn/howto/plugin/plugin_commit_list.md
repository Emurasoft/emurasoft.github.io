# 使用提交列表插件

**提交列表**插件默认安装在 EmEditor Professional 中。此插件会显示 Git 仓库的当前更改和提交的历史记录。要使用**提交列表**插件，请点击**插件**栏上的 ![提交列表](../../images/plugin_commit_list.png) 图标。或到**工具**菜单上，将鼠标指向**插件**，然后点击**提交列表**。

此插件将首先检查当前文档是否在一个 **[Git](https://git-scm.com/)** 仓库中。如果是，您可以选择该仓库并显示其提交的历史记录。您可以点击**打开...**按钮来打开不同的仓库。

## 更改边栏

该插件将首先检查当前文档是否在 **[Git](https://git-scm.com/)** 仓库中。 如果是，将打开仓库并显示其状态。您可以单击侧边栏中的**打开...**按钮打开不同的仓库。

当前更改和暂存的更改显示在侧边栏中。暂存的更改是添加到索引中的更改。对工作目录的所有其他更改都显示在更改树中。

右键单击侧边栏中的已更改文件将显示一个菜单，其中包含针对该已更改文件的命令。以下是该菜单中的选项。

- **查看更改**会在编辑器中显示与之前版本的文件所做的比较结果，以显示文件做了哪些修改。具体来说，所比较的文件版本是暂存文件的最后一次提交和索引版本，或未暂存文件的索引版本和工作树版本。
- **打开文件**会打开编辑器中的文件。
- **暂存**和**取消暂存**相当于 `git add` 和 `git reset` 命令。
- **撤消更改**可以应用在未暂存的文件上。它调用 `git checkout` 以用索引中的内容来覆写文件。未追踪的文件会被删除。
- 如果列出了子模块，**更新子模块**将调用 [`git submodule update --init`](https://git-scm.com/docs/git-submodule#Documentation/git-submodule.txt-update--init--remote-N--no-fetch--no-recommend-shallow-f--force--checkout--rebase--merge--referenceltrepositorygt--depthltdepthgt--recursive--jobsltngt--no-single-branch--filterltfilterspecgt--ltpathgt82308203) 来将子模块中的文件更新到其当前的 `HEAD`。
- **刷新**将刷新更改的文件列表。

提交列表插件会监视文件系统，如果仓库目录中的文件被外部程序修改，则会刷新侧边栏。

**拉取**按钮会将更改从远程仓库拉取到本地仓库。 **推送**则将本地更改发送到远程仓库。如果当前分支没有与上游分支相关联，则在将更改推送到上游分支之前将创建上游分支。这些命令在完成时会用状态栏发送消息。

**拉取**和**推送**按钮还能显示一个数字，以指示上游分支后面或前面的提交数量。“拉取 (1)”表示有 1 个提交要拉取，“推送 (1)”表示有 1 个提交要推送。菜单中的**自动获取**选项对于定期更新这些数字非常有用。

您可以点击 **>** 按钮来访问更多命令。

- **刷新**会刷新已更改的文件列表。
- **命令输出**显示先前命令的输出。
- **状态**命令会列出 `git status` 的输出。
- **获取**命令会更新您的远程跟踪分支。
- **打开仓库文件夹**会打开文件资源管理器中的仓库文件夹。
- 如果当前分支有上游分支， **打开仓库网站**会在网页浏览器中打开项目的源代码管理和协作网站，例如 GitHub。
- 如果启用**自动获取**，则每 3 分钟调用一次 `git fetch`。
- **帮助**会打开此页。

您可以使用下拉菜单变更当前分支。变更分支等同于命令 `git checkout branch`。冲突的更改将阻止您签出分支。

分支下拉列表下方的编辑控件是您可以编写提交消息的地方。单击**提交暂存**/**提交全部**来提交暂存更改或暂存所有更改并提交。提交将提交给当前选定的分支。

## 提交列表

点击**提交列表**按钮来查看提交历史。在提交列表中，可以通过左侧的分支列表查看其他分支的历史记录。选择提交后，右侧栏会显示提交详细信息和此次提交更改的文件列表。右键单击列表中的文件并选择**与上一个版本比较**以查看此次提交对文件的更改。

在提交列表中，您可以右键单击提交并选择**复制**以复制提交详细信息。 **提交时浏览文件**将在提交时显示目录树。 **比较提交**将向您展示两次提交之间的差异。

您可以通过单击**筛选记录**来筛选列表。输入**筛选字符串**，选择**筛选依据**选项，然后点击**筛选**。提交列表现在仅显示与筛选匹配的提交。 点击**筛选记录**按钮旁边的 **取消筛选** 按钮会取消筛选。

左侧面板会显示 Git 仓库中的分支列表。右键单击分支所显示的上下文菜单包含下列与分支相关的命令。

- **查看分支**：显示该分支的提交列表。
- **比较分支**：当选择两个分支时，您可以比较这些分支之间的文件。
- **刷新**：刷新 CommitList 栏显示的信息。
- **签出分支**：切换到分支。
- **创建新分支...**：从所选分支创建新分支并签出新分支。
- **删除分支**：删除所选分支。
- **删除远程分支**：删除该分支跟踪的远程分支（调用 `git push -v <upstream> --delete <branch>` 命令）。

如果在当前仓库中的文件已在编辑器中打开，则可以使用**查看当前文件的历史记录**按钮。它会列出包括对当前文件的更改的所有提交。右键单击一个提交将显示四个选项。 **显示提交**会跳转到主提交列表中的那个提交。 **与上一个版本比较**将文件与其之前的修订版进行比较。 **提交时比较文件**则将两次不同提交时的文件进行比较。 **与工作树中的文件比较**会比较所选提交的文件和工作树中的版本。

## 提示

- 按 **F6** 键或 **ESC** 键可以让键盘焦点返回到编辑器中。
